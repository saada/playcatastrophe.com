<!DOCTYPE html>
<!--html lang="en-us" manifest="v1.appcache"-->
<html lang="en-us">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0" name="viewport" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta property="og:title" content="Catastrophe" />
  <meta property="og:url" content="http://www.playcatastrophe.com" />
  <meta property="og:image" content="http://www.playcatastrophe.com/cover.png" />
  <link rel="apple-touch-icon" href="images/icon.png">
  <meta name="theme-color" content="#deaaa1">
  <link rel="manifest" href="manifest.json">
  <title>cat'astrophe</title>
  <link rel="shortcut icon" href="images/icon.png">
  <link rel="stylesheet" href="TemplateData/style.css">
  <script src="TemplateData/UnityProgress.js"></script>
  <script src="Build/UnityLoader.js"></script>
  <script>
    var unityInstance = UnityLoader.instantiate("unityContainer", "Build/WebGL.json", {
      onProgress: UnityProgress
    });
  </script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-BJ7MD8VP11"></script>
</head>

<body>
  <noscript>Please enable JavaScript!</noscript>

  <div class="webgl-content" onclick="unityInstance.SetFullscreen(1)">
    <div id="unityContainer" style="box-sizing: border-box; width: 100vw; height: 100vh"></div>
  </div>
  <script src="./dependencies/a2hs.js"></script>
  <script>

    // Detects if device is on iOS
    var userAgent = window.navigator.userAgent
    const isIos = /iphone|ipad|ipod/i.test( userAgent)
    const isAndroid = /android/i.test(userAgent)
    // Detects if device is in standalone mode
    const isInStandaloneMode = ('standalone' in window.navigator) && (window.navigator.standalone) || window.matchMedia('(display-mode: standalone)').matches || document.referrer.includes('android-app://');

    alert(isInStandaloneMode)
    AddToHomeScreen({
      show: (!isInStandaloneMode) && (isIos || isAndroid),
      brandName: "cat'astrophe",
      backgroundColor: "rgba(53, 51, 51, 0.95)", //"#2c2c2c",
      color: "#fff",
      padding: "2em",
      logoImage: "<image/>", //"<image src='images/share.png' height='50'>",
      htmlContent: `
<strong style='font-size: 1.5em'>To play in fullscreen mode</strong>
<div style='margin-top: 0.5em'>
  <div style='margin-top: 0.5em; display: flex; justify-content: space-between; align-items: center'>
    <div style='font-size: 1em'>1. Tap the ${isIos ? "share" : "menu"} icon ${isIos ? "below" : "above"}</div>
    <image src='${isIos ? "images/share.png" : "images/ellipsis.jpg"}' width='15'/>
  </div>
  <div style='margin-top: 0.5em; display: flex; justify-content: space-between; align-items: center'>
    <div style='font-size: 1em'>2. Scroll and press <strong>Add to Home Screen</strong></div>
    <image src='images/add.png' width='15'/>
  </div>
</div>
`
    });
    if('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    };
  </script>
</body>

</html>